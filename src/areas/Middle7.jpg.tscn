[gd_scene load_steps=17 format=3 uid="uid://dvgkywh2c18xf"]

[ext_resource type="Script" path="res://src/teleportation/Panorama.gd" id="1_25di4"]
[ext_resource type="SphereMesh" uid="uid://dpeh5ksm83jbm" path="res://src/teleportation/PanoramaSphereMeshBase.tres" id="2_1oa45"]
[ext_resource type="PackedScene" uid="uid://5iqynxjjb1jk" path="res://src/teleportation/Teleporter.tscn" id="3_m3sr5"]
[ext_resource type="Script" path="res://src/teleportation/Teleporter.gd" id="4_40l63"]
[ext_resource type="PackedScene" uid="uid://c3pkwiah1exl8" path="res://src/assets/A1/Table.tscn" id="5_8adsr"]
[ext_resource type="Script" path="res://src/ems/eventsystem_new/EventControl.gd" id="5_g46qw"]
[ext_resource type="Script" path="res://src/ems/eventsystem_new/BGMPlayerInA1.gd" id="6_7dqii"]
[ext_resource type="PackedScene" uid="uid://cf7200jemvmw6" path="res://src/assets/A1/RodSilverTorch.tscn" id="6_y7rnq"]
[ext_resource type="Script" path="res://src/ems/eventsystem_new/ActionUseNormalRagOnly.gd" id="7_lwtky"]
[ext_resource type="Script" path="res://src/ems/eventsystem_new/ActionUsePolishOnRod.gd" id="8_gntjn"]
[ext_resource type="Script" path="res://src/ems/eventsystem_new/ActionPolishRod1.gd" id="9_upvub"]
[ext_resource type="Script" path="res://src/ems/eventsystem_new/ActionPolishRod2.gd" id="10_y2err"]
[ext_resource type="Script" path="res://src/ems/eventsystem_new/DialogueCalandraOfSanto.gd" id="11_uihfg"]
[ext_resource type="PackedScene" uid="uid://c1nfdxx4l4avm" path="res://src/assets/marble_spirit_normal.tscn" id="13_t4dbj"]
[ext_resource type="PackedScene" uid="uid://01ckhq2mi3lb" path="res://src/assets/A2/Pillar_Wood.glb" id="15_eywd5"]
[ext_resource type="PackedScene" uid="uid://bfcpm6g53chw4" path="res://src/assets/A MAIN/Journal.tscn" id="16_ghadr"]

[node name="middle7_jpg" type="Node3D"]
transform = Transform3D(0.999987, 0, 0, 0, 1, 0, 0, 0, 0.999987, 0, 0, 0)
top_level = true
script = ExtResource("1_25di4")
teleporters_data = [{
"position": Vector3(3.83956, -1.08934, -0.272267),
"to": "Middle6.jpg"
}, {
"position": Vector3(-3.72102, -1.46818, -0.0401978),
"to": "Img2023111609464900044.jpg"
}]
image_filename = "res://src/areas/Middle7.jpg.jpg"
base_rotation = 1.47

[node name="MeshInstance3D" type="MeshInstance3D" parent="."]
transform = Transform3D(10, 0, 0, 0, 10, 0, 0, 0, 10, 0, 0, 0)
gi_mode = 0
mesh = ExtResource("2_1oa45")
skeleton = NodePath("../../..")

[node name="OmniLight3D" type="OmniLight3D" parent="."]
light_energy = 3.015
omni_range = 16.12

[node name="Teleporters" type="Node3D" parent="."]

[node name="Middle6_jpg" type="StaticBody3D" parent="Teleporters" instance=ExtResource("3_m3sr5")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3.83956, -1.08934, -0.272267)
collision_layer = 5243392
collision_mask = 0
script = ExtResource("4_40l63")
to = "Middle6.jpg"

[node name="Img2023111609464900044_jpg" type="StaticBody3D" parent="Teleporters" instance=ExtResource("3_m3sr5")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.72102, -1.46818, -0.0401978)
collision_layer = 5243392
collision_mask = 0
script = ExtResource("4_40l63")
to = "Img2023111609464900044.jpg"

[node name="Events" type="Node" parent="."]
script = ExtResource("5_g46qw")

[node name="BGMPlayerInA1" type="Node" parent="Events"]
script = ExtResource("6_7dqii")

[node name="ActionUseNormalRagOnly" type="Node" parent="Events" node_paths=PackedStringArray("event_audio_source")]
script = ExtResource("7_lwtky")
event_audio_source = NodePath("../../MarbleSpirit_Normal/AudioStreamPlayer3D")

[node name="ActionUsePolishOnRod" type="Node" parent="Events" node_paths=PackedStringArray("event_audio_source")]
script = ExtResource("8_gntjn")
event_audio_source = NodePath("../../MarbleSpirit_Normal/AudioStreamPlayer3D")

[node name="ActionPolishRod1" type="Node" parent="Events" node_paths=PackedStringArray("event_audio_source")]
script = ExtResource("9_upvub")
event_audio_source = NodePath("../../MarbleSpirit_Normal/AudioStreamPlayer3D")

[node name="ActionPolishRod2" type="Node" parent="Events" node_paths=PackedStringArray("event_audio_source")]
script = ExtResource("10_y2err")
event_audio_source = NodePath("../../MarbleSpirit_Normal/AudioStreamPlayer3D")

[node name="DialogueCalandraOfSanto" type="Node" parent="Events" node_paths=PackedStringArray("event_audio_source")]
script = ExtResource("11_uihfg")
event_audio_source = NodePath("../../MarbleSpirit_Normal/AudioStreamPlayer3D")

[node name="Table" parent="." instance=ExtResource("5_8adsr")]
transform = Transform3D(0.0573026, 0, -0.998357, 0, 1, 0, 0.998357, 0, 0.0573026, -0.933813, -1.67721, 1.04373)

[node name="RodSilverTorch" parent="." instance=ExtResource("6_y7rnq")]
transform = Transform3D(0.0149394, -0.999888, 0, 0.999888, 0.0149394, 0, 0, 0, 1, 0, -0.642857, 0.764676)

[node name="RodSilverTorch2" parent="." instance=ExtResource("6_y7rnq")]
transform = Transform3D(0.0149394, -0.999888, 0, 0.999888, 0.0149394, 0, 0, 0, 1, -0.697706, -0.642857, 1.04906)

[node name="PolishedRod" parent="RodSilverTorch2/OiledRagReceiver" index="1" node_paths=PackedStringArray("dirt")]
dirt = NodePath("../../../RodSilverTorch/Node3D")

[node name="MarbleSpirit_Normal" parent="." instance=ExtResource("13_t4dbj")]
transform = Transform3D(0.0348581, 0, 0.247558, 0, 0.25, 0, -0.247558, 0, 0.0348581, -1.92617, -0.333609, 1.34512)

[node name="AudioStreamPlayer3D" type="AudioStreamPlayer3D" parent="MarbleSpirit_Normal"]

[node name="Pillar_Wood" parent="." instance=ExtResource("15_eywd5")]
transform = Transform3D(0.15, 0, 0, 0, 0.15, 0, 0, 0, 0.15, -2.74373, -2.2, -1.11432)

[node name="Journal" parent="." instance=ExtResource("16_ghadr")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.75573, -0.488819, -1.09807)

[connection signal="action_completed" from="RodSilverTorch/OiledRagReceiver" to="Events/ActionPolishRod1" method="_on_oiled_rag_receiver_action_completed"]
[connection signal="action_completed" from="RodSilverTorch/CleanRagReceiver" to="Events/ActionUseNormalRagOnly" method="_on_clean_rag_receiver_action_completed"]
[connection signal="action_completed" from="RodSilverTorch/PolishReceiver" to="Events/ActionUsePolishOnRod" method="_on_polish_receiver_action_completed"]
[connection signal="action_completed" from="RodSilverTorch2/OiledRagReceiver" to="Events/ActionPolishRod2" method="_on_oiled_rag_receiver_action_completed"]
[connection signal="action_completed" from="RodSilverTorch2/CleanRagReceiver" to="Events/ActionUseNormalRagOnly" method="_on_clean_rag_receiver_action_completed"]
[connection signal="action_completed" from="RodSilverTorch2/PolishReceiver" to="Events/ActionUsePolishOnRod" method="_on_polish_receiver_action_completed"]
[connection signal="pointer_event" from="Journal" to="Events/DialogueCalandraOfSanto" method="_on_journal_pointer_event"]

[editable path="RodSilverTorch"]
[editable path="RodSilverTorch2"]
